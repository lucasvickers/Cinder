language: cpp
git:
  depth: 1

matrix:
  fast_finish: false

  # build out OS X support in complete matrix
  - os: osx
    compiler:
      - clang
      - gcc
    osx_image: 
      - xcode6.4
      - xcode7
      - xcode7.1
      - xcode7.2
      - xcode7.3
      - xcode8

  include:

  - os: linux
    dist: trusty
    compiler: clang
    addons:
      apt:
        sources:
          - ubuntu-toolchain-r-test
        packages:
          - g++-4.9
    sudo: required
    env: TARGET="trusty"

#- os: linux
#    dist: trusty
#    sudo: required
#    env: TARGET="yakkety"
#    services: docker

install:
  - if [ "$TARGET" == "trusty" ]; then
      tools/ci/$TARGET/dependencies.sh;
    fi

script:
  - if [ "$TRAVIS_OS_NAME" == "osx" ]; then
      # TODO add building and testing of unit tests
      xcode/fullbuild.sh
    else
      #build this out for further linux support
      # TODO add debug and release here
      tools/ci/cmake.sh -DCINDER_BUILD_SAMPLES:BOOL=1 && make check
    fi